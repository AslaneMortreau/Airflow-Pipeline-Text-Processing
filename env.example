# Airflow Configuration
AIRFLOW_UID=50000
AIRFLOW_GID=0
AIRFLOW_PROJ_DIR=.

# Database Configuration
POSTGRES_USER=airflow
POSTGRES_PASSWORD=airflow
POSTGRES_DB=airflow

# Airflow Web Server Configuration
_AIRFLOW_WWW_USER_USERNAME=admin
_AIRFLOW_WWW_USER_PASSWORD=admin123

# Redis Configuration
REDIS_PASSWORD=

# Airflow Core Settings
AIRFLOW__CORE__EXECUTOR=CeleryExecutor
AIRFLOW__CORE__LOAD_EXAMPLES=False
AIRFLOW__CORE__DAGS_ARE_PAUSED_AT_CREATION=True
AIRFLOW__CORE__MAX_ACTIVE_RUNS_PER_DAG=16
AIRFLOW__CORE__MAX_ACTIVE_TASKS_PER_DAG=16

# Airflow Database Settings
AIRFLOW__DATABASE__SQL_ALCHEMY_CONN=postgresql+psycopg2://airflow:airflow@postgres/airflow
AIRFLOW__DATABASE__SQL_ALCHEMY_POOL_SIZE=5
AIRFLOW__DATABASE__SQL_ALCHEMY_MAX_OVERFLOW=10

# Airflow Celery Settings
AIRFLOW__CELERY__RESULT_BACKEND=db+postgresql://airflow:airflow@postgres/airflow
AIRFLOW__CELERY__BROKER_URL=redis://:@redis:6379/0
AIRFLOW__CELERY__WORKER_CONCURRENCY=16

# Airflow Webserver Settings
AIRFLOW__WEBSERVER__EXPOSE_CONFIG=True
AIRFLOW__WEBSERVER__RBAC=True
AIRFLOW__WEBSERVER__SECRET_KEY=your-secret-key-here

# Airflow Logging Settings
AIRFLOW__LOGGING__LOGGING_LEVEL=INFO
AIRFLOW__LOGGING__LOGFILENAME_TEMPLATE={{ ti.dag_id }}/{{ ti.task_id }}/{{ ts }}/{{ try_number }}.log

# Airflow Email Settings (optional)
AIRFLOW__EMAIL__EMAIL_BACKEND=airflow.utils.email.send_email_smtp
AIRFLOW__EMAIL__SMTP_HOST=localhost
AIRFLOW__EMAIL__SMTP_PORT=587
AIRFLOW__EMAIL__SMTP_USER=
AIRFLOW__EMAIL__SMTP_PASSWORD=
AIRFLOW__EMAIL__SMTP_MAIL_FROM=

# Airflow API Settings
AIRFLOW__API__AUTH_BACKENDS=airflow.api.auth.backend.basic_auth

# Airflow Scheduler Settings
AIRFLOW__SCHEDULER__ENABLE_HEALTH_CHECK=True
AIRFLOW__SCHEDULER__SCHEDULE_AFTER_TASK_EXECUTION=True
AIRFLOW__SCHEDULER__CATCHUP_BY_DEFAULT=False
